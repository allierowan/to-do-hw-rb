<h1>All To Dos</h1>
<table class="table">
  <tr>
    <th>
      Complete
    </th>
    <th>
      List Name
    </th>
    <th>
      Description
    </th>
    <th>
      Due Date
    </th>
    <th>
    </th>
  </tr>
  <% @todos.each do |to_do| %>
  <tr>
    <td>
      <% if to_do.is_complete %>
      <span class="complete">Completed on <%= to_do.completed_at.strftime "%A, %d %b %Y %l:%M %p" %></span>
      <% elsif @all %>
      <form action="/todos/all/<%= to_do.id %>" method="post">
        <input type="hidden" name="_method" value="patch">
        <input type="hidden" name="todo[is_complete]" value="<%= true %>">
        <input type="hidden" name="all" value="<%= @all %>">
        <input type="submit" value="Complete">
      </form>
      <% else %>
        <form action="/todos/<%= to_do.id %>" method="post">
          <input type="hidden" name="_method" value="patch">
          <input type="hidden" name="todo[is_complete]" value="<%= true %>">
          <input type="hidden" name="all" value="<%= @all %>">
          <input type="submit" value="Complete">
        </form>
      <% end %>
    </td>
    <td>
      <a href="/lists/<%= to_do.list_id %>"><%= to_do.list.name %></a>
    </td>
    <td>
      <a href="/todos/<%= to_do.id %>"><%= to_do.description %></a>
    </td>
    <td>
      <%= to_do.due_at.strftime "%A, %d %b %Y" if to_do.due_at %>
    </td>
    <td>
      <% if @all %>
        <form action="/todos/all/<%= to_do.id %>" method="post">
          <input type="hidden" name="_method" value="delete">
          <input type="hidden" name="list_id" value="<%= to_do.list_id %>">
          <input type="submit" value="Delete">
        </form>
      <% else %>
        <form action="/todos/<%= to_do.id %>" method="post">
          <input type="hidden" name="_method" value="delete">
          <input type="hidden" name="list_id" value="<%= to_do.list_id %>">
          <input type="submit" value="Delete">
        </form>
      <% end %>
    </td>
  </tr>
  <% end %>
  <tr>
    <td>
    </td>
    <td>
      <% if @all %>
        <a href="/todos">See active</a>
      <% else %>
        <a href="/all/todos">See all</a>
      <% end %>
    </td>
    <td>
    </td>
    <td>
    </td>
  </tr>
</table>
